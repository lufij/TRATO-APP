import{g as _,r as d,j as e,C as S,c as P,a as k,b as A,H as G,s as E,f as w,d as R,e as T,v as F,B as $,L as O,R as q}from"./index-4-AwG29v.js";import{A as D,a as L}from"./alert-DOpAQqM1.js";import{C as B}from"./circle-x-DX92_EAG.js";import{G as H}from"./globe-CvnpqTwL.js";import{L as M}from"./lock-CZ-3tcfC.js";import{M as U}from"./map-pin-Bq09d-Wk.js";import{I as W}from"./info-pXAA3aog.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],z=_("key",Q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],J=_("lock-open",K);function X(){const[j,f]=d.useState([]),[y,v]=d.useState(!0);d.useEffect(()=>{(async()=>{var b,a;const o=[];{const t=(b=G.url.split("//")[1])==null?void 0:b.split(".")[0];o.push({name:"Project URL",status:"success",value:G.url,message:`Proyecto: ${t}`})}{const t=G.anonKey.substring(0,20)+"...";o.push({name:"Anon Key",status:"success",value:t,message:"Clave pública configurada correctamente"})}try{const{error:t}=await E.from("users").select("count",{count:"exact",head:!0});t?t.code==="PGRST205"?o.push({name:"Conexión DB",status:"error",message:"Tablas no creadas - ejecutar fix_setup.sql"}):o.push({name:"Conexión DB",status:"error",message:`Error de conexión: ${t.message}`}):o.push({name:"Conexión DB",status:"success",message:"Conexión a base de datos exitosa"})}catch{o.push({name:"Conexión DB",status:"error",message:"Error al conectar con Supabase"})}try{const{data:{session:t}}=await E.auth.getSession();o.push({name:"Autenticación",status:"info",message:t?`Usuario: ${(a=t.user)==null?void 0:a.email}`:"Sistema de auth funcional"})}catch{o.push({name:"Autenticación",status:"error",message:"Error en sistema de autenticación"})}try{const{data:t,error:h}=await E.storage.listBuckets();if(h)o.push({name:"Storage",status:"error",message:`Error de storage: ${h.message}`});else{const x=(t==null?void 0:t.length)||0;o.push({name:"Storage",status:x>0?"success":"error",message:x>0?`${x} buckets configurados`:"Sin buckets configurados"})}}catch{o.push({name:"Storage",status:"error",message:"Error al acceder a storage"})}f(o),v(!1)})()},[]);const u=n=>{switch(n){case"success":return e.jsx(T,{className:"w-5 h-5 text-green-600"});case"error":return e.jsx(B,{className:"w-5 h-5 text-red-600"});case"info":return e.jsx(R,{className:"w-5 h-5 text-blue-600"})}},N=n=>{switch(n){case"success":return e.jsx(w,{className:"bg-green-100 text-green-800 border-green-300",children:"✓ OK"});case"error":return e.jsx(w,{className:"bg-red-100 text-red-800 border-red-300",children:"✗ ERROR"});case"info":return e.jsx(w,{className:"bg-blue-100 text-blue-800 border-blue-300",children:"ℹ INFO"})}};return y?e.jsx(S,{children:e.jsxs(P,{className:"p-6 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Verificando credenciales..."})]})}):e.jsxs(S,{children:[e.jsx(k,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5"}),"Estado de Credenciales Supabase"]})}),e.jsxs(P,{className:"space-y-4",children:[j.map((n,o)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${n.status==="success"?"bg-green-50 border-green-200":n.status==="error"?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[u(n.status),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n.name}),e.jsx("p",{className:"text-sm text-gray-600",children:n.message}),n.value&&e.jsx("p",{className:"text-xs text-gray-500 font-mono",children:n.value})]})]}),N(n.status)]},o)),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"¿Necesitas más credenciales?"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Para tu aplicación de delivery, las credenciales actuales son ",e.jsx("strong",{children:"suficientes"}),". Solo necesitarías credenciales adicionales para funciones avanzadas como operaciones de administrador."]})]})]})]})}const Y={enableHighAccuracy:!0,timeout:15e3,maximumAge:3e5};function Z(j={}){const[f,y]=d.useState(null),[v,u]=d.useState(null),[N,n]=d.useState(!1),[o,b]=d.useState(null),a=d.useRef(null),t="geolocation"in navigator,h={...Y,...j},x=d.useCallback((s,m="")=>{let r=0,p="Error desconocido al obtener la ubicación",I="";s&&typeof s=="object"?"code"in s&&typeof s.code=="number"?(r=s.code,p=ee(s.code),I=s.message||""):"message"in s?(r=0,p=s.message||"Error genérico",I=s.toString()):(r=0,p="Error de formato desconocido",I=JSON.stringify(s)):typeof s=="string"?(r=0,p=s,I=s):(r=0,p="Error sin información disponible",I=String(s));const V={code:r,message:p,details:I||void 0,PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3};return console.error(`Geolocation Error${m?` (${m})`:""}:`,{error:V,originalError:s,navigator:{geolocation:!!navigator.geolocation,permissions:!!navigator.permissions,userAgent:navigator.userAgent},options:h}),V},[h]),i=d.useCallback(async()=>{if(!("permissions"in navigator))return console.warn("Permissions API not supported in this browser"),null;try{const s=await navigator.permissions.query({name:"geolocation"});return b(s.state),s.addEventListener("change",()=>{console.log("Geolocation permission changed to:",s.state),b(s.state)}),s.state}catch(s){const m=x(s,"permission check");return console.warn("Error checking geolocation permission:",m),null}},[x]),c=d.useCallback(async()=>new Promise((s,m)=>{if(!t){const r=x(new Error("Geolocation not supported"),"request permission");m(r);return}console.log("Requesting geolocation permission..."),navigator.geolocation.getCurrentPosition(r=>{console.log("Permission granted via getCurrentPosition"),b("granted"),s("granted")},r=>{if(console.log("Permission request error:",r),r.code===1)b("denied"),s("denied");else{b("denied");const p=x(r,"permission request");m(p)}},{enableHighAccuracy:!1,timeout:1e4,maximumAge:1/0})}),[t,x]),g=d.useCallback(()=>new Promise((s,m)=>{if(!t){const r=x(new Error("Geolocation is not supported by this browser"),"getCurrentPosition - unsupported");u(r),m(r);return}console.log("Getting current position with options:",h),n(!0),u(null),navigator.geolocation.getCurrentPosition(r=>{console.log("Position obtained successfully:",{latitude:r.coords.latitude,longitude:r.coords.longitude,accuracy:r.coords.accuracy,timestamp:r.timestamp});const p={coords:{latitude:r.coords.latitude,longitude:r.coords.longitude,accuracy:r.coords.accuracy,altitude:r.coords.altitude,altitudeAccuracy:r.coords.altitudeAccuracy,heading:r.coords.heading,speed:r.coords.speed},timestamp:r.timestamp};y(p),n(!1),u(null),s(p)},r=>{console.error("Failed to get current position:",r);const p=x(r,"getCurrentPosition");u(p),n(!1),m(p)},h)}),[t,h,x]),C=d.useCallback(()=>{a.current!==null&&(console.log("Clearing geolocation watch:",a.current),navigator.geolocation.clearWatch(a.current),a.current=null),n(!1)},[]),l=d.useCallback(()=>{if(!t||a.current!==null){console.warn("Cannot start watch: supported=",t,"existing watchId=",a.current);return}console.log("Starting geolocation watch with options:",h),n(!0),u(null),a.current=navigator.geolocation.watchPosition(s=>{console.log("Watch position update:",{latitude:s.coords.latitude,longitude:s.coords.longitude,accuracy:s.coords.accuracy,timestamp:s.timestamp});const m={coords:{latitude:s.coords.latitude,longitude:s.coords.longitude,accuracy:s.coords.accuracy,altitude:s.coords.altitude,altitudeAccuracy:s.coords.altitudeAccuracy,heading:s.coords.heading,speed:s.coords.speed},timestamp:s.timestamp};y(m),n(!1),u(null)},s=>{console.error("Watch position error:",s);const m=x(s,"watchPosition");u(m),n(!1)},h),console.log("Started geolocation watch with ID:",a.current)},[t,h,x]);return d.useEffect(()=>(console.log("useGeolocation effect triggered with options:",{immediate:j.immediate,watch:j.watch,supported:t}),i(),j.immediate&&t?g().catch(s=>{console.error("Failed to get initial position:",s)}):j.watch&&t&&l(),()=>{console.log("useGeolocation cleanup"),C()}),[i,g,C,l,j.immediate,j.watch,t]),{position:f,error:v,loading:N,supported:t,permissionState:o,getCurrentPosition:g,clearWatch:C,requestPermission:c}}function ee(j){switch(j){case 1:return"Permisos de ubicación denegados. Por favor, habilita el acceso a tu ubicación en las configuraciones del navegador.";case 2:return"Ubicación no disponible. Verifica que tu dispositivo tenga GPS habilitado y que tengas conexión a internet.";case 3:return"Tiempo de espera agotado. La búsqueda de ubicación tardó demasiado. Intenta nuevamente.";default:return"Error desconocido al obtener la ubicación. Verifica los permisos y configuraciones de tu dispositivo."}}function se(){const[j,f]=d.useState("Iniciando diagnóstico..."),[y,v]=d.useState([]),[u,N]=d.useState(!1),{position:n,error:o,loading:b,supported:a,permissionState:t,getCurrentPosition:h,requestPermission:x}=Z({enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4,immediate:!1}),i=(l,s,m,r)=>{v(p=>[...p,{id:Date.now(),test:l,status:s,message:m,details:r,timestamp:new Date().toLocaleTimeString()}])},c=async()=>{N(!0),v([]),f("Ejecutando diagnóstico completo...");try{if(f("Verificando soporte del navegador..."),a)i("Browser Support","success","Geolocation API soportada");else{i("Browser Support","error","Geolocation API no soportada en este navegador"),N(!1);return}if(f("Verificando API de permisos..."),"permissions"in navigator){i("Permissions API","success","API de permisos disponible");try{const s=await navigator.permissions.query({name:"geolocation"});i("Permission State","success",`Estado: ${s.state}`,{state:s.state})}catch(s){i("Permission Query","error","Error al consultar permisos",s)}}else i("Permissions API","warning","API de permisos no disponible (navegador antiguo)");f("Verificando contexto de seguridad..."),location.protocol==="https:"||location.hostname==="localhost"?i("Security Context","success","Contexto seguro (HTTPS/localhost)"):i("Security Context","warning","Contexto no seguro - Geolocation puede no funcionar",{protocol:location.protocol,hostname:location.hostname}),f("Recopilando información del navegador..."),i("Browser Info","success","Información del navegador recopilada",{userAgent:navigator.userAgent,language:navigator.language,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,platform:navigator.platform}),f("Probando solicitud de permisos...");try{const s=await x();i("Permission Request","success",`Permisos: ${s}`)}catch(s){i("Permission Request","error","Error al solicitar permisos",s)}f("Probando obtención de posición...");try{const s=await h();i("Position Retrieval","success","Posición obtenida exitosamente",{latitude:s.coords.latitude,longitude:s.coords.longitude,accuracy:s.coords.accuracy,timestamp:s.timestamp})}catch(s){i("Position Retrieval","error","Error al obtener posición",s)}f("Diagnóstico completado")}catch(l){i("Diagnostic","error","Error durante el diagnóstico",l),f("Error en diagnóstico")}finally{N(!1)}},g=l=>{switch(l){case"success":return e.jsx(T,{className:"w-4 h-4 text-green-600"});case"error":return e.jsx(B,{className:"w-4 h-4 text-red-600"});case"warning":return e.jsx(R,{className:"w-4 h-4 text-yellow-600"});default:return e.jsx(W,{className:"w-4 h-4 text-blue-600"})}},C=l=>{switch(l){case"success":return e.jsx(w,{className:"bg-green-100 text-green-800",children:"Exitoso"});case"error":return e.jsx(w,{variant:"destructive",children:"Error"});case"warning":return e.jsx(w,{className:"bg-yellow-100 text-yellow-800",children:"Advertencia"});default:return e.jsx(w,{variant:"outline",children:"Info"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(S,{children:[e.jsx(k,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5 text-blue-600"}),"Diagnóstico de Geolocalización"]})}),e.jsxs(P,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(F,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Soporte"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[a?e.jsx(T,{className:"w-4 h-4 text-green-600"}):e.jsx(B,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm",children:a?"Soportado":"No soportado"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t==="granted"?e.jsx(J,{className:"w-4 h-4 text-green-600"}):e.jsx(M,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Permisos"})]}),e.jsx("div",{className:"text-sm",children:t||"Desconocido"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(U,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Posición"})]}),e.jsx("div",{className:"text-sm",children:n?"Disponible":"No disponible"})]})]}),n&&e.jsxs(D,{children:[e.jsx(U,{className:"h-4 w-4"}),e.jsxs(L,{children:[e.jsx("strong",{children:"Posición actual:"}),e.jsx("br",{}),"Lat: ",n.coords.latitude.toFixed(6),e.jsx("br",{}),"Lng: ",n.coords.longitude.toFixed(6),e.jsx("br",{}),"Precisión: ±",n.coords.accuracy.toFixed(0),"m"]})]}),o&&e.jsxs(D,{variant:"destructive",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsxs(L,{children:[e.jsx("strong",{children:"Error actual:"}),e.jsx("br",{}),"Código: ",o.code,e.jsx("br",{}),"Mensaje: ",o.message,o.details&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"Detalles: ",o.details]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{onClick:c,disabled:u,className:"flex items-center gap-2",children:[u?e.jsx(O,{className:"w-4 h-4 animate-spin"}):e.jsx(q,{className:"w-4 h-4"}),"Ejecutar Diagnóstico Completo"]}),e.jsx($,{onClick:h,disabled:b||u,variant:"outline",children:"Probar Ubicación"})]}),u&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-800",children:j})]})})]})]}),y.length>0&&e.jsxs(S,{children:[e.jsx(k,{children:e.jsx(A,{children:"Resultados del Diagnóstico"})}),e.jsx(P,{children:e.jsx("div",{className:"space-y-3",children:y.map(l=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[g(l.status),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm",children:l.test}),C(l.status),e.jsx("span",{className:"text-xs text-gray-500",children:l.timestamp})]}),e.jsx("p",{className:"text-sm text-gray-700",children:l.message}),l.details&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer",children:"Ver detalles"}),e.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded mt-1 overflow-auto",children:JSON.stringify(l.details,null,2)})]})]})]},l.id))})})]}),e.jsxs(S,{children:[e.jsx(k,{children:e.jsx(A,{children:"Guía de Solución de Problemas"})}),e.jsx(P,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"border-l-4 border-red-500 pl-4",children:[e.jsx("h4",{className:"font-medium text-red-800",children:"Si los permisos están denegados:"}),e.jsxs("ul",{className:"text-sm text-red-700 mt-1 space-y-1",children:[e.jsx("li",{children:"• Haz clic en el ícono de ubicación en la barra de direcciones"}),e.jsx("li",{children:'• Selecciona "Permitir" para este sitio'}),e.jsx("li",{children:"• Recarga la página"})]})]}),e.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4",children:[e.jsx("h4",{className:"font-medium text-yellow-800",children:"Si la ubicación no está disponible:"}),e.jsxs("ul",{className:"text-sm text-yellow-700 mt-1 space-y-1",children:[e.jsx("li",{children:"• Verifica que el GPS esté habilitado en tu dispositivo"}),e.jsx("li",{children:"• Asegúrate de tener conexión a internet"}),e.jsx("li",{children:"• Intenta mover el dispositivo al aire libre"})]})]}),e.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Si el tiempo de espera se agota:"}),e.jsxs("ul",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[e.jsx("li",{children:"• Espera un momento y vuelve a intentar"}),e.jsx("li",{children:"• Verifica tu conexión de red"}),e.jsx("li",{children:"• Considera usar entrada manual de dirección"})]})]})]})})]})]})}function le(){const[j,f]=d.useState([]),[y,v]=d.useState(!1),[u,N]=d.useState("success"),n=async()=>{var x;v(!0);const a=[];try{try{const{data:c,error:g}=await E.from("users").select("count",{count:"exact",head:!0});g?g.code==="PGRST205"?a.push({component:"Tabla Users",status:"error",message:'Tabla "users" no encontrada',details:"Ejecutar fix_setup.sql en Supabase SQL Editor"}):a.push({component:"Tabla Users",status:"error",message:`Error de base de datos: ${g.message}`,details:g.code||"Error desconocido"}):a.push({component:"Tabla Users",status:"success",message:`Tabla users existe (${c||0} registros)`,details:"Configuración correcta"})}catch{a.push({component:"Conexión Supabase",status:"error",message:"Error de conexión a Supabase",details:"Verificar credenciales en config.ts"})}const i=["sellers","drivers","products","cart_items","orders"];for(const c of i)try{const{error:g}=await E.from(c).select("count",{count:"exact",head:!0});g?a.push({component:`Tabla ${c}`,status:"error",message:`Tabla "${c}" no encontrada o error de acceso`,details:g.message}):a.push({component:`Tabla ${c}`,status:"success",message:`Tabla ${c} existe y es accesible`})}catch{a.push({component:`Tabla ${c}`,status:"error",message:`Error al acceder a tabla ${c}`})}try{const{data:c,error:g}=await E.storage.listBuckets();if(g)a.push({component:"Storage Buckets",status:"error",message:"Error al acceder a Storage",details:g.message});else{const C=["products","avatars","business-logos"],l=(c==null?void 0:c.map(m=>m.name))||[],s=C.filter(m=>!l.includes(m));s.length===0?a.push({component:"Storage Buckets",status:"success",message:"Todos los buckets existen",details:`Buckets: ${l.join(", ")}`}):a.push({component:"Storage Buckets",status:"warning",message:`Buckets faltantes: ${s.join(", ")}`,details:"Ejecutar fix_setup.sql para crear buckets"})}}catch{a.push({component:"Storage Buckets",status:"error",message:"Error al verificar buckets de storage"})}try{const{data:{session:c}}=await E.auth.getSession();a.push({component:"Autenticación",status:c?"success":"warning",message:c?"Usuario autenticado":"Sin sesión activa",details:c?`Usuario: ${(x=c.user)==null?void 0:x.email}`:"Estado normal para usuario no logueado"})}catch{a.push({component:"Autenticación",status:"error",message:"Error en sistema de autenticación"})}}catch(i){a.push({component:"General",status:"error",message:"Error general en diagnósticos",details:i instanceof Error?i.message:"Error desconocido"})}f(a);const t=a.some(i=>i.status==="error"),h=a.some(i=>i.status==="warning");N(t?"error":h?"warning":"success"),v(!1)};d.useEffect(()=>{n()},[]);const o=a=>{switch(a){case"success":return e.jsx(T,{className:"w-5 h-5 text-green-600"});case"error":return e.jsx(B,{className:"w-5 h-5 text-red-600"});case"warning":return e.jsx(R,{className:"w-5 h-5 text-yellow-600"})}},b=a=>{switch(a){case"success":return e.jsx(w,{className:"bg-green-100 text-green-800 border-green-300",children:"OK"});case"error":return e.jsx(w,{className:"bg-red-100 text-red-800 border-red-300",children:"ERROR"});case"warning":return e.jsx(w,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:"WARNING"})}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Diagnóstico de Configuración - DeliveryApp"}),e.jsx("p",{className:"text-gray-600",children:"Esta página verifica que tu configuración de Supabase esté funcionando correctamente."})]}),e.jsx("div",{className:"mb-6",children:e.jsx(X,{})}),e.jsxs(S,{className:"mb-6",children:[e.jsx(k,{children:e.jsxs(A,{className:"flex items-center gap-3",children:[o(u),"Estado General",e.jsx($,{variant:"outline",size:"sm",onClick:n,disabled:y,className:"ml-auto",children:y?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"w-4 h-4 mr-2 animate-spin"}),"Verificando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Verificar Nuevamente"]})})]})}),e.jsxs(P,{children:[u==="error"&&e.jsxs(D,{variant:"destructive",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsxs(L,{children:[e.jsx("strong",{children:"Configuración incompleta."})," Ejecuta el script ",e.jsx("code",{children:"fix_setup.sql"})," en Supabase SQL Editor para resolver los errores."]})]}),u==="warning"&&e.jsxs(D,{children:[e.jsx(R,{className:"h-4 w-4"}),e.jsxs(L,{children:[e.jsx("strong",{children:"Configuración parcial."})," Algunos componentes necesitan atención pero la aplicación debería funcionar."]})]}),u==="success"&&e.jsxs(D,{className:"border-green-200 bg-green-50",children:[e.jsx(T,{className:"h-4 w-4 text-green-600"}),e.jsxs(L,{className:"text-green-800",children:[e.jsx("strong",{children:"¡Configuración completa!"})," Tu aplicación está lista para usar."]})]})]})]}),e.jsx("div",{className:"grid gap-4",children:j.map((a,t)=>e.jsx(S,{className:`border-l-4 ${a.status==="success"?"border-l-green-500":a.status==="warning"?"border-l-yellow-500":"border-l-red-500"}`,children:e.jsx(P,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[o(a.status),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:a.component}),b(a.status)]}),e.jsx("p",{className:"text-gray-700",children:a.message}),a.details&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a.details})]})]})})})},t))}),u==="error"&&e.jsxs(S,{className:"mt-8 border-red-200 bg-red-50",children:[e.jsx(k,{children:e.jsx(A,{className:"text-red-800",children:"Instrucciones de Reparación"})}),e.jsx(P,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800",children:"Abrir Supabase Dashboard"}),e.jsx("p",{className:"text-red-700",children:"Ve a https://supabase.com/dashboard y selecciona tu proyecto"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800",children:"Ejecutar Script SQL"}),e.jsxs("p",{className:"text-red-700",children:["Ve a SQL Editor → New Query → Copia y ejecuta el contenido completo de ",e.jsx("code",{children:"/database/fix_setup.sql"})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800",children:"Configurar Autenticación"}),e.jsx("p",{className:"text-red-700",children:'Ve a Authentication → Settings → Desactiva "Enable email confirmations"'})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded",children:"4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800",children:"Verificar Resultados"}),e.jsx("p",{className:"text-red-700",children:'Haz clic en "Verificar Nuevamente" para confirmar que todo esté funcionando'})]})]})]})})]}),e.jsx("div",{className:"mt-8",children:e.jsx(se,{})}),e.jsxs(S,{className:"mt-8",children:[e.jsx(k,{children:e.jsx(A,{children:"Información del Proyecto"})}),e.jsx(P,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Proyecto Supabase:"}),e.jsx("p",{className:"text-gray-600",children:"olidxbacfxrijmmtpcoy"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"URL:"}),e.jsx("p",{className:"text-gray-600 break-all",children:"https://olidxbacfxrijmmtpcoy.supabase.co"})]})]})})]})]})})}export{le as DiagnosticPage};
