import{u as A,r as u,j as e,B as d,C as k,a as V,b as z,P as B,L as C,c as $}from"./index-4-AwG29v.js";import{I as m}from"./input-CpumT4jH.js";import{T as M}from"./textarea-CEdelz7N.js";import{L as l}from"./label-CC14d3iK.js";import{A as O,a as G}from"./alert-DOpAQqM1.js";import{S as H,a as U,b as J,c as K,d as x,C as Q}from"./select-8vWsytcu.js";import{A as W}from"./arrow-left-ZRY0wD5A.js";import{E as S}from"./eye-off-Co_I1k2a.js";import{E as P}from"./eye-BWSEqSXu.js";import{T as X}from"./truck-B1XgDIDQ.js";import{S as Y}from"./store-QTE8zrRl.js";import{S as Z}from"./shopping-bag-DWBhS1Jd.js";function ue({role:t,onBack:T}){const{signUp:D,loading:o,isRegistering:a,registrationProgress:E}=A(),[i,f]=u.useState(1),[g,F]=u.useState(!1),[b,q]=u.useState(!1),[s,c]=u.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",businessName:"",businessDescription:"",vehicleType:"",licenseNumber:""}),[N,n]=u.useState(""),j=t==="comprador"?2:3,v=i/j*100,w=r=>{switch(r){case 1:return s.name&&s.phone&&s.phone.length===8&&s.password&&s.password===s.confirmPassword&&s.password.length>=6;case 2:return t==="comprador"?!0:t==="vendedor"?s.businessName:t==="repartidor"?s.vehicleType&&s.licenseNumber:!0;default:return!0}},I=()=>{w(i)?(n(""),f(r=>r+1)):n("Por favor completa todos los campos requeridos")},L=async r=>{if(r.preventDefault(),n(""),!s.name||!s.phone||!s.password){n("Por favor completa todos los campos requeridos");return}if(s.phone.length!==8){n("El tel√©fono debe tener exactamente 8 d√≠gitos");return}if(!/^\d{8}$/.test(s.phone)){n("El tel√©fono solo debe contener n√∫meros");return}if(s.password!==s.confirmPassword){n("Las contrase√±as no coinciden");return}if(s.password.length<6){n("La contrase√±a debe tener al menos 6 caracteres");return}if(t==="vendedor"&&!s.businessName){n("El nombre del negocio es requerido para vendedores");return}if(t==="repartidor"&&(!s.vehicleType||!s.licenseNumber)){n("El tipo de veh√≠culo y n√∫mero de licencia son requeridos para repartidores");return}try{const p=s.email||`+502${s.phone}@trato.app`,R=`+502${s.phone}`,y=await D(p,s.password,{name:s.name,role:t,phone:R,businessName:s.businessName,businessDescription:s.businessDescription,vehicleType:s.vehicleType,licenseNumber:s.licenseNumber});y.success||n(y.error||"Error al registrar usuario")}catch{n("Ocurri√≥ un error inesperado")}},h=(()=>{switch(t){case"comprador":return{title:"Registro como Comprador",icon:e.jsx(Z,{className:"w-6 h-6"}),description:"Descubre y compra productos locales",color:"from-blue-500 to-blue-600"};case"vendedor":return{title:"Registro como Vendedor",icon:e.jsx(Y,{className:"w-6 h-6"}),description:"Vende tus productos y haz crecer tu negocio",color:"from-green-500 to-green-600"};case"repartidor":return{title:"Registro como Repartidor",icon:e.jsx(X,{className:"w-6 h-6"}),description:"Genera ingresos entregando pedidos",color:"from-orange-500 to-orange-600"}}})();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-green-50 py-8",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-lg",children:[e.jsxs(d,{variant:"ghost",onClick:T,className:"mb-4",disabled:o||a,children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Volver"]}),e.jsxs(k,{className:"shadow-lg",children:[e.jsxs(V,{className:"text-center",children:[e.jsx("div",{className:`bg-gradient-to-r ${h.color} p-3 rounded-full w-16 h-16 mx-auto mb-4`,children:e.jsx("div",{className:"text-white",children:h.icon})}),e.jsx(z,{className:"flex items-center justify-center gap-2",children:h.title}),e.jsx("p",{className:"text-gray-600",children:h.description}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsxs("span",{children:["Paso ",i," de ",j]}),e.jsxs("span",{children:[Math.round(v),"% completado"]})]}),e.jsx(B,{value:v,className:"h-2"}),a&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-blue-800",children:[e.jsx(C,{className:"w-4 h-4 animate-spin"}),"Procesando registro (",E,"%)"]})})]})]}),e.jsx($,{children:e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[i===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Informaci√≥n Personal"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name",children:"Nombre completo *"}),e.jsx(m,{id:"name",value:s.name,onChange:r=>c({...s,name:r.target.value}),placeholder:"Tu nombre completo",required:!0,disabled:o||a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"phone",children:"Tel√©fono *"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex items-center bg-gray-50 border border-r-0 border-gray-300 rounded-l-md px-3 text-gray-500 text-sm font-medium",children:"+502"}),e.jsx(m,{id:"phone",type:"tel",value:s.phone,onChange:r=>{const p=r.target.value.replace(/\D/g,"").slice(0,8);c({...s,phone:p})},placeholder:"12345678",className:"rounded-l-none border-l-0",required:!0,disabled:o||a,maxLength:8})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ingresa 8 d√≠gitos (sin +502)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"password",children:"Contrase√±a *"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{id:"password",type:g?"text":"password",value:s.password,onChange:r=>c({...s,password:r.target.value}),placeholder:"M√≠nimo 6 caracteres",required:!0,disabled:o||a}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>F(!g),disabled:o||a,children:g?e.jsx(S,{className:"h-4 w-4"}):e.jsx(P,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"confirmPassword",children:"Confirmar contrase√±a *"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{id:"confirmPassword",type:b?"text":"password",value:s.confirmPassword,onChange:r=>c({...s,confirmPassword:r.target.value}),placeholder:"Repite tu contrase√±a",required:!0,disabled:o||a}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>q(!b),disabled:o||a,children:b?e.jsx(S,{className:"h-4 w-4"}):e.jsx(P,{className:"h-4 w-4"})})]})]}),s.password&&s.confirmPassword&&s.password!==s.confirmPassword&&e.jsx("p",{className:"text-sm text-red-600",children:"Las contrase√±as no coinciden"})]}),i===2&&t!=="comprador"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:t==="vendedor"?"Informaci√≥n del Negocio":"Informaci√≥n del Veh√≠culo"}),t==="vendedor"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"businessName",children:"Nombre del negocio *"}),e.jsx(m,{id:"businessName",value:s.businessName,onChange:r=>c({...s,businessName:r.target.value}),placeholder:"Nombre de tu negocio",required:!0,disabled:o||a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"businessDescription",children:"Descripci√≥n del negocio"}),e.jsx(M,{id:"businessDescription",value:s.businessDescription,onChange:r=>c({...s,businessDescription:r.target.value}),placeholder:"Describe tu negocio y productos",rows:3,disabled:o||a})]})]}),t==="repartidor"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"vehicleType",children:"Tipo de veh√≠culo *"}),e.jsxs(H,{onValueChange:r=>c({...s,vehicleType:r}),disabled:o||a,children:[e.jsx(U,{children:e.jsx(J,{placeholder:"Selecciona tu veh√≠culo"})}),e.jsxs(K,{children:[e.jsx(x,{value:"bicicleta",children:"üö≤ Bicicleta"}),e.jsx(x,{value:"motocicleta",children:"üèçÔ∏è Motocicleta"}),e.jsx(x,{value:"carro",children:"üöó Carro"}),e.jsx(x,{value:"camioneta",children:"üöö Camioneta"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"licenseNumber",children:"N√∫mero de licencia *"}),e.jsx(m,{id:"licenseNumber",value:s.licenseNumber,onChange:r=>c({...s,licenseNumber:r.target.value}),placeholder:"N√∫mero de licencia de conducir",required:!0,disabled:o||a})]})]})]}),i===2&&t==="comprador"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"¬°Listo para comenzar!"}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-blue-800 mb-3 font-medium",children:"üéâ ¬°Tu cuenta est√° lista! Como comprador tendr√°s acceso a:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Cat√°logo completo de productos locales"}),e.jsx("li",{children:"‚Ä¢ Entregas r√°pidas a domicilio"}),e.jsx("li",{children:"‚Ä¢ Seguimiento en tiempo real"}),e.jsx("li",{children:"‚Ä¢ Soporte al cliente 24/7"})]})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-green-800",children:"‚ú® Al crear tu cuenta, acceder√°s inmediatamente a tu dashboard"})})]}),N&&e.jsx(O,{variant:"destructive",children:e.jsx(G,{children:N})}),e.jsxs("div",{className:"flex justify-between",children:[i>1&&e.jsx(d,{type:"button",variant:"outline",onClick:()=>f(r=>r-1),disabled:o||a,children:"Anterior"}),i<j?e.jsx(d,{type:"button",onClick:I,disabled:!w(i)||o||a,className:"ml-auto",children:"Siguiente"}):e.jsx(d,{type:"submit",disabled:o||a,className:"ml-auto bg-gradient-to-r from-orange-500 to-green-500 hover:from-orange-600 hover:to-green-600",children:o||a?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 mr-2 animate-spin"}),"Creando cuenta..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Crear Cuenta"]})})]})]})})]})]})})}export{ue as RegistrationForm};
