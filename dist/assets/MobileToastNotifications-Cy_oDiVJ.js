import{g as k,k as G,r as c,Q as me,j as i,l as N,z as w,y as U,w as $,x as V,m as ge,n as L,o as R,u as pe,s as be,X as ve,p as xe,d as Te,e as he}from"./index-eGXwqV4X.js";import{u as K}from"./select-BOIONLOD.js";import{S as we}from"./shopping-cart-BTErv8XZ.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Xe=k("dollar-sign",ye);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ie=k("package",Ne);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Je=k("trending-up",Ae);var F="rovingFocusGroup.onEntryFocus",Re={bubbles:!1,cancelable:!0},C="RovingFocusGroup",[M,B,Ce]=me(C),[_e,q]=G(C,[Ce]),[Ee,Se]=_e(C),z=c.forwardRef((e,t)=>i.jsx(M.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(M.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Fe,{...e,ref:t})})}));z.displayName=C;var Fe=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:l=!1,dir:g,currentTabStopId:f,defaultCurrentTabStopId:b,onCurrentTabStopIdChange:p,onEntryFocus:o,preventScrollOnEntryFocus:n=!1,...a}=e,u=c.useRef(null),m=U(t,u),d=$(g),[x=null,I]=V({prop:f,defaultProp:b,onChange:p}),[T,h]=c.useState(!1),_=ge(o),ie=B(s),E=c.useRef(!1),[ce,P]=c.useState(0);return c.useEffect(()=>{const v=u.current;if(v)return v.addEventListener(F,_),()=>v.removeEventListener(F,_)},[_]),i.jsx(Ee,{scope:s,orientation:r,dir:d,loop:l,currentTabStopId:x,onItemFocus:c.useCallback(v=>I(v),[I]),onItemShiftTab:c.useCallback(()=>h(!0),[]),onFocusableItemAdd:c.useCallback(()=>P(v=>v+1),[]),onFocusableItemRemove:c.useCallback(()=>P(v=>v-1),[]),children:i.jsx(N.div,{tabIndex:T||ce===0?-1:0,"data-orientation":r,...a,ref:m,style:{outline:"none",...e.style},onMouseDown:w(e.onMouseDown,()=>{E.current=!0}),onFocus:w(e.onFocus,v=>{const ue=!E.current;if(v.target===v.currentTarget&&ue&&!T){const D=new CustomEvent(F,Re);if(v.currentTarget.dispatchEvent(D),!D.defaultPrevented){const S=ie().filter(y=>y.focusable),le=S.find(y=>y.active),de=S.find(y=>y.id===x),fe=[le,de,...S].filter(Boolean).map(y=>y.ref.current);Y(fe,n)}}E.current=!1}),onBlur:w(e.onBlur,()=>h(!1))})})}),W="RovingFocusGroupItem",H=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:l=!1,tabStopId:g,...f}=e,b=K(),p=g||b,o=Se(W,s),n=o.currentTabStopId===p,a=B(s),{onFocusableItemAdd:u,onFocusableItemRemove:m}=o;return c.useEffect(()=>{if(r)return u(),()=>m()},[r,u,m]),i.jsx(M.ItemSlot,{scope:s,id:p,focusable:r,active:l,children:i.jsx(N.span,{tabIndex:n?0:-1,"data-orientation":o.orientation,...f,ref:t,onMouseDown:w(e.onMouseDown,d=>{r?o.onItemFocus(p):d.preventDefault()}),onFocus:w(e.onFocus,()=>o.onItemFocus(p)),onKeyDown:w(e.onKeyDown,d=>{if(d.key==="Tab"&&d.shiftKey){o.onItemShiftTab();return}if(d.target!==d.currentTarget)return;const x=je(d,o.orientation,o.dir);if(x!==void 0){if(d.metaKey||d.ctrlKey||d.altKey||d.shiftKey)return;d.preventDefault();let T=a().filter(h=>h.focusable).map(h=>h.ref.current);if(x==="last")T.reverse();else if(x==="prev"||x==="next"){x==="prev"&&T.reverse();const h=T.indexOf(d.currentTarget);T=o.loop?Oe(T,h+1):T.slice(h+1)}setTimeout(()=>Y(T))}})})})});H.displayName=W;var Me={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ke(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function je(e,t,s){const r=ke(e.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Me[r]}function Y(e,t=!1){const s=document.activeElement;for(const r of e)if(r===s||(r.focus({preventScroll:t}),document.activeElement!==s))return}function Oe(e,t){return e.map((s,r)=>e[(t+r)%e.length])}var Pe=z,De=H;function Le(e,t){return c.useReducer((s,r)=>t[s][r]??s,e)}var Q=e=>{const{present:t,children:s}=e,r=Ge(t),l=typeof s=="function"?s({present:r.isPresent}):c.Children.only(s),g=U(r.ref,Ue(l));return typeof s=="function"||r.isPresent?c.cloneElement(l,{ref:g}):null};Q.displayName="Presence";function Ge(e){const[t,s]=c.useState(),r=c.useRef({}),l=c.useRef(e),g=c.useRef("none"),f=e?"mounted":"unmounted",[b,p]=Le(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const o=A(r.current);g.current=b==="mounted"?o:"none"},[b]),L(()=>{const o=r.current,n=l.current;if(n!==e){const u=g.current,m=A(o);e?p("MOUNT"):m==="none"||(o==null?void 0:o.display)==="none"?p("UNMOUNT"):p(n&&u!==m?"ANIMATION_OUT":"UNMOUNT"),l.current=e}},[e,p]),L(()=>{if(t){let o;const n=t.ownerDocument.defaultView??window,a=m=>{const x=A(r.current).includes(m.animationName);if(m.target===t&&x&&(p("ANIMATION_END"),!l.current)){const I=t.style.animationFillMode;t.style.animationFillMode="forwards",o=n.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=I)})}},u=m=>{m.target===t&&(g.current=A(r.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",a),t.addEventListener("animationend",a),()=>{n.clearTimeout(o),t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",a),t.removeEventListener("animationend",a)}}else p("ANIMATION_END")},[t,p]),{isPresent:["mounted","unmountSuspended"].includes(b),ref:c.useCallback(o=>{o&&(r.current=getComputedStyle(o)),s(o)},[])}}function A(e){return(e==null?void 0:e.animationName)||"none"}function Ue(e){var r,l;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(l=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:l.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var j="Tabs",[$e,Ze]=G(j,[q]),X=q(),[Ve,O]=$e(j),J=c.forwardRef((e,t)=>{const{__scopeTabs:s,value:r,onValueChange:l,defaultValue:g,orientation:f="horizontal",dir:b,activationMode:p="automatic",...o}=e,n=$(b),[a,u]=V({prop:r,onChange:l,defaultProp:g});return i.jsx(Ve,{scope:s,baseId:K(),value:a,onValueChange:u,orientation:f,dir:n,activationMode:p,children:i.jsx(N.div,{dir:n,"data-orientation":f,...o,ref:t})})});J.displayName=j;var Z="TabsList",ee=c.forwardRef((e,t)=>{const{__scopeTabs:s,loop:r=!0,...l}=e,g=O(Z,s),f=X(s);return i.jsx(Pe,{asChild:!0,...f,orientation:g.orientation,dir:g.dir,loop:r,children:i.jsx(N.div,{role:"tablist","aria-orientation":g.orientation,...l,ref:t})})});ee.displayName=Z;var te="TabsTrigger",ne=c.forwardRef((e,t)=>{const{__scopeTabs:s,value:r,disabled:l=!1,...g}=e,f=O(te,s),b=X(s),p=ae(f.baseId,r),o=se(f.baseId,r),n=r===f.value;return i.jsx(De,{asChild:!0,...b,focusable:!l,active:n,children:i.jsx(N.button,{type:"button",role:"tab","aria-selected":n,"aria-controls":o,"data-state":n?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:p,...g,ref:t,onMouseDown:w(e.onMouseDown,a=>{!l&&a.button===0&&a.ctrlKey===!1?f.onValueChange(r):a.preventDefault()}),onKeyDown:w(e.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&f.onValueChange(r)}),onFocus:w(e.onFocus,()=>{const a=f.activationMode!=="manual";!n&&!l&&a&&f.onValueChange(r)})})})});ne.displayName=te;var oe="TabsContent",re=c.forwardRef((e,t)=>{const{__scopeTabs:s,value:r,forceMount:l,children:g,...f}=e,b=O(oe,s),p=ae(b.baseId,r),o=se(b.baseId,r),n=r===b.value,a=c.useRef(n);return c.useEffect(()=>{const u=requestAnimationFrame(()=>a.current=!1);return()=>cancelAnimationFrame(u)},[]),i.jsx(Q,{present:l||n,children:({present:u})=>i.jsx(N.div,{"data-state":n?"active":"inactive","data-orientation":b.orientation,role:"tabpanel","aria-labelledby":p,hidden:!u,id:o,tabIndex:0,...f,ref:t,style:{...e.style,animationDuration:a.current?"0s":void 0},children:u&&g})})});re.displayName=oe;function ae(e,t){return`${e}-trigger-${t}`}function se(e,t){return`${e}-content-${t}`}var Ke=J,Be=ee,qe=ne,ze=re;function et({className:e,...t}){return i.jsx(Ke,{"data-slot":"tabs",className:R("flex flex-col gap-2",e),...t})}function tt({className:e,...t}){return i.jsx(Be,{"data-slot":"tabs-list",className:R("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function nt({className:e,...t}){return i.jsx(qe,{"data-slot":"tabs-trigger",className:R("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function ot({className:e,...t}){return i.jsx(ze,{"data-slot":"tabs-content",className:R("flex-1 outline-none",e),...t})}function rt({onNewOrder:e}){const{user:t}=pe(),[s,r]=c.useState([]),l=c.useCallback(o=>{try{const n=new(window.AudioContext||window.webkitAudioContext);if(o==="new_order")[220,330,440].forEach((a,u)=>{setTimeout(()=>{const m=n.createOscillator(),d=n.createGain();m.connect(d),d.connect(n.destination),m.frequency.setValueAtTime(a,n.currentTime),m.type="sine",d.gain.setValueAtTime(.3,n.currentTime),d.gain.exponentialRampToValueAtTime(.01,n.currentTime+.3),m.start(n.currentTime),m.stop(n.currentTime+.3)},u*200)});else{const a=n.createOscillator(),u=n.createGain();a.connect(u),u.connect(n.destination),a.frequency.setValueAtTime(300,n.currentTime),a.type="sine",u.gain.setValueAtTime(.2,n.currentTime),u.gain.exponentialRampToValueAtTime(.01,n.currentTime+.2),a.start(n.currentTime),a.stop(n.currentTime+.2)}}catch(n){console.log("Audio not supported:",n)}},[]),g=c.useCallback(o=>{const n=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a={...o,id:n,timestamp:new Date().toISOString(),autoRemove:o.autoRemove!==!1};r(u=>[a,...u.slice(0,4)]),l(o.type),a.autoRemove&&setTimeout(()=>{f(n)},12e4),o.type==="new_order"&&e&&e()},[l,e]),f=c.useCallback(o=>{r(n=>n.filter(a=>a.id!==o))},[]);c.useEffect(()=>{if(!(t!=null&&t.id))return;const o=be.channel("seller-order-toasts").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders",filter:`seller_id=eq.${t.id}`},n=>{var u;const a=n.new;g({type:"new_order",title:"🛒 Nueva Orden",message:`Pedido de Q${((u=a.total)==null?void 0:u.toFixed(2))||"0.00"} recibido`,autoRemove:!0})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders",filter:`seller_id=eq.${t.id}`},n=>{const a=n.new,u=n.old;if(a.status!==u.status){let m="",d="order_update";switch(a.status){case"confirmed":m="Orden confirmada exitosamente",d="success";break;case"ready":m="Orden lista para entrega",d="success";break;case"delivered":m="Orden entregada exitosamente",d="success";break;case"cancelled":m="Orden cancelada",d="warning";break;default:return}g({type:d,title:"📋 Actualización de Orden",message:m,autoRemove:!0})}}).subscribe();return()=>{o.unsubscribe()}},[t==null?void 0:t.id,g]);const b=o=>{switch(o){case"new_order":return i.jsx(we,{className:"w-5 h-5 text-blue-600"});case"order_update":return i.jsx(Ie,{className:"w-5 h-5 text-green-600"});case"success":return i.jsx(he,{className:"w-5 h-5 text-green-600"});case"warning":return i.jsx(Te,{className:"w-5 h-5 text-yellow-600"});default:return i.jsx(xe,{className:"w-5 h-5 text-gray-600"})}},p=o=>{switch(o){case"new_order":return"bg-blue-50 border-blue-200 shadow-lg ring-2 ring-blue-500/20";case"success":return"bg-green-50 border-green-200 shadow-lg ring-2 ring-green-500/20";case"warning":return"bg-yellow-50 border-yellow-200 shadow-lg ring-2 ring-yellow-500/20";default:return"bg-white border-gray-200 shadow-lg"}};return s.length===0?null:i.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm w-full pointer-events-none",children:s.map((o,n)=>i.jsx("div",{className:`
            ${p(o.type)}
            rounded-lg border p-4 pointer-events-auto
            transform transition-all duration-300 ease-in-out
            animate-in slide-in-from-right-2 fade-in-0
            ${n>0?"opacity-90 scale-95":""}
          `,style:{animationDelay:`${n*100}ms`,transform:`translateY(${n*4}px) scale(${1-n*.05})`},children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-0.5",children:b(o.type)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:o.title}),i.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:o.message}),i.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(o.timestamp).toLocaleTimeString("es-GT",{hour:"2-digit",minute:"2-digit"})})]}),i.jsx("button",{onClick:()=>f(o.id),className:"flex-shrink-0 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Cerrar notificación",children:i.jsx(ve,{className:"w-4 h-4 text-gray-400"})})]})},o.id))})}export{Xe as D,De as I,rt as M,Ie as P,Pe as R,et as T,tt as a,nt as b,Je as c,ot as d,q as e,Q as f};
